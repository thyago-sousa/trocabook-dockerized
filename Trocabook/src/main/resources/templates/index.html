<!DOCTYPE html>
<html lang="pt-br" xmlns:th="http://thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="/css/style.css"/>
    <title>Home | Trocabook</title>
</head>
<body>
<div class="container">
    <header>
        <div class="wrapper">
            <table class="cabecalho"><tr>
                <th id="cabecalhoelementos">
                    <a href="/"><img src="/img/Design sem nome (7).svg"></a>
                    <div class="autocomplete-wrapper">
                        <input type="text" style="width: 100%; height: 35px;" id="pesquisa" placeholder="Pesquisar">
                        <div id="resultadosPesquisa" class="sugestoes-autocomplete"></div>
                    </div>

                    <select id="inputCategoria" class="form-control" style="width: 200px; height:37px; margin-left: 15px;">
                        <option selected>Categoria...</option>
                        <option>Ação</option>
                        <option>Romance</option>
                        <option>Literatura</option>
                        <option>Lógica de Programação</option>
                        <option>Direito</option>
                        <option>Suspense</option>
                        <option>Ficção Científica</option>
                    </select>

                    <th:block sec:authorize="isAuthenticated()">
                        <a class="anunciar-livro4" href="/AnunciarLivro">Anunciar Livro</a>
                        <a class="meus-livros4" href="/MeusLivros">Meus Livros</a>

                        <form th:action="@{/logout}" method="post" style="display: inline;">
                            <button type="submit" id="deslogar">Sair</button>
                        </form>

                        <span style="color: white; margin-left: 15px; font-weight: bold;">
                            Olá, <span th:text="${#authentication.principal.usuario.nmUsuario}"></span>
                        </span>
                    </th:block>

                    <th:block sec:authorize="!isAuthenticated()">
                        <a href="/login" id="loginbotao"><button type="submit" style="width: 150px; height:37px;">Fazer login</button></a>
                    </th:block>
                </th></tr>
                <tr>
                    <th:block sec:authorize="!isAuthenticated()">
                        <th>
                            <a class="cadbutton" href="/cadastro" id="cadastrobotao">Cadastre-se</a>
                        </th>
                    </th:block>
                </tr>
            </table>
        </div>
    </header>

    <div vw class="enabled">
        <div vw-access-button class="active"></div>
        <div vw-plugin-wrapper>
            <div class="vw-plugin-top-wrapper"></div>
        </div>
    </div>
    <script src="https://vlibras.gov.br/app/vlibras-plugin.js"></script>
    <script>
        new window.VLibras.Widget('https://vlibras.gov.br/app');
    </script>
    <div class="banner">
        <h1 id="saudacao"></h1>
        <br><img class="banner" src="/img/Banner.png">
    </div>
    <table class="negociadores">
        <tr>
            <th><h1>Negociantes em Destaque</h1>
                <div class="responsive-destaques">
                    <div th:each="destaque : ${destaques}">
                        <a th:href="@{'destaque/' + ${destaque.cdUsuario}}"><img th:src="${destaque.foto}" alt="Usuário em destaque"></a>
                    </div>
                </div>
            </th>
    </table>
    <div class="livros">
        <h2>Propostas recentes</h2>
        <section class="livros-grid">
            <div class="livro-card">
                <img src="/img/61460909.jpg" class="capaLivros">
                <p>Livro Senhor dos Aneis: A Sociedade do Anel</p>
                <th:block sec:authorize="isAuthenticated()">
                    <a th:href="@{'/chat/conversar?usuarioLivro=10&remetente=' + ${#authentication.principal.usuario.cdUsuario}}">
                        <button type="button">Negociar</button>
                    </a>
                </th:block>
                <th:block sec:authorize="!isAuthenticated()">
                    <a href="/login"><button type="button">Negociar</button></a>
                </th:block>
            </div>

            <div class="livro-card">
                <img src="/img/IALIVRO.png" class="capaLivros">
                <p>A Era da IA: e nosso futuro como humanos</p>
                <th:block sec:authorize="isAuthenticated()">
                    <a th:href="@{'/chat/conversar?usuarioLivro=1&remetente=' + ${#authentication.principal.usuario.cdUsuario}}">
                        <button type="button">Negociar</button>
                    </a>
                </th:block>
                <th:block sec:authorize="!isAuthenticated()">
                    <a href="/login"><button type="button">Negociar</button></a>
                </th:block>
            </div>

            <div class="livro-card">
                <img src="/img/livro2.png" class="capaLivros">
                <p>A Floresta Sombria</p>
                <th:block sec:authorize="isAuthenticated()">
                    <a th:href="@{'/chat/conversar?usuarioLivro=2&remetente=' + ${#authentication.principal.usuario.cdUsuario}}">
                        <button type="button">Negociar</button>
                    </a>
                </th:block>
                <th:block sec:authorize="!isAuthenticated()">
                    <a href="/login"><button type="button">Negociar</button></a>
                </th:block>
            </div>

            <div class="livro-card">
                <img src="/img/culpa.jpg" class="capaLivros">
                <p>A Culpa é das Estrelas</p>
                <th:block sec:authorize="isAuthenticated()">
                    <a th:href="@{'/chat/conversar?usuarioLivro=3&remetente=' + ${#authentication.principal.usuario.cdUsuario}}">
                        <button type="button">Negociar</button>
                    </a>
                </th:block>
                <th:block sec:authorize="!isAuthenticated()">
                    <a href="/login"><button type="button">Negociar</button></a>
                </th:block>
            </div>

            <div class="livro-card">
                <img src="/img/livro4.png" class="capaLivros">
                <p>O Pequeno Príncipe</p>
                <th:block sec:authorize="isAuthenticated()">
                    <a th:href="@{'/chat/conversar?usuarioLivro=4&remetente=' + ${#authentication.principal.usuario.cdUsuario}}">
                        <button type="button">Negociar</button>
                    </a>
                </th:block>
                <th:block sec:authorize="!isAuthenticated()">
                    <a href="/login"><button type="button">Negociar</button></a>
                </th:block>
            </div>

            <div class="livro-card">
                <img src="/img/livro6.png" class="capaLivros">
                <p>365 Reflexões Estóicas</p>
                <th:block sec:authorize="isAuthenticated()">
                    <a th:href="@{'/chat/conversar?usuarioLivro=5&remetente=' + ${#authentication.principal.usuario.cdUsuario}}">
                        <button type="button">Negociar</button>
                    </a>
                </th:block>
                <th:block sec:authorize="!isAuthenticated()">
                    <a href="/login"><button type="button">Negociar</button></a>
                </th:block>
            </div>

            <div class="livro-card">
                <img src="/img/dom casmurro.jpg" class="capaLivros">
                <p>Dom Casmurro</p>
                <th:block sec:authorize="isAuthenticated()">
                    <a th:href="@{'/chat/conversar?usuarioLivro=6&remetente=' + ${#authentication.principal.usuario.cdUsuario}}">
                        <button type="button">Negociar</button>
                    </a>
                </th:block>
                <th:block sec:authorize="!isAuthenticated()">
                    <a href="/login"><button type="button">Negociar</button></a>
                </th:block>
            </div>

            <div class="livro-card">
                <img src="/img/harry.jpg" class="capaLivros">
                <p>Coletânea Harry Potter</p>
                <th:block sec:authorize="isAuthenticated()">
                    <a th:href="@{'/chat/conversar?usuarioLivro=7&remetente=' + ${#authentication.principal.usuario.cdUsuario}}">
                        <button type="button">Negociar</button>
                    </a>
                </th:block>
                <th:block sec:authorize="!isAuthenticated()">
                    <a href="/login"><button type="button">Negociar</button></a>
                </th:block>
            </div>

            <div class="livro-card">
                <img src="/img/capa-ampliada-9788575224380.jpg" class="capaLivros">
                <p>Fundamentos de html5 e css3</p>
                <th:block sec:authorize="isAuthenticated()">
                    <a th:href="@{'/chat/conversar?usuarioLivro=8&remetente=' + ${#authentication.principal.usuario.cdUsuario}}">
                        <button type="button">Negociar</button>
                    </a>
                </th:block>
                <th:block sec:authorize="!isAuthenticated()">
                    <a href="/login"><button type="button">Negociar</button></a>
                </th:block>
            </div>

            <div class="livro-card">
                <img src="/img/engenharia de software.jpg" class="capaLivros">
                <p>Sommerville - Engenharia de Software</p>
                <th:block sec:authorize="isAuthenticated()">
                    <a th:href="@{'/chat/conversar?usuarioLivro=9&remetente=' + ${#authentication.principal.usuario.cdUsuario}}">
                        <button type="button">Negociar</button>
                    </a>
                </th:block>
                <th:block sec:authorize="!isAuthenticated()">
                    <a href="/login"><button type="button">Negociar</button></a>
                </th:block>
            </div>
        </section>
        <a style="text-decoration: none", href="/livros">
            <p style="text-align: right; text-decoration: none; color:#007BFF">> Ver todos os anúncios</p>
        </a>
        <br><br><br>
    </div>

    <footer>
        <div class="rodapenovo">
            <a href="/"><img src="/img/Design sem nome.svg"></a>
            <a href="/sobreNos"><p>Conheça nosso incrível projeto <br>de incentivo a reutilização</p></a>
            <a href="/ajuda"><p>Central de ajuda</p></a>
            <small>© 2025 Sistema Trocabook<br>Todos os direitos reservados</small>
        </div>
    </footer>
</div>
</body>
<script src="/js/fetch.js"></script>
</html>